#!/bin/bash
set -euo pipefail

# Get the server's public IP for display purposes
SERVER_IP=$(curl -s ifconfig.me 2>/dev/null || curl -s ipinfo.io/ip 2>/dev/null || hostname -I | awk '{print $1}')
echo "Starting Vite dev server..."
echo "Server will be accessible at: http://${SERVER_IP}:5173"

# Export for HMR to use the public IP
export VITE_HMR_HOST="${SERVER_IP}"

# Start Vite (will use host:true from vite.config.js)
cd /var/www/html
npm run dev
